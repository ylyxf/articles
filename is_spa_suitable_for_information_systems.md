# SPA适合管理信息系统吗
因为工作上的要求，最近接触并开始学习react。两个月过去了，始终不得入门。终日思索，偶尔一问，记录下来。
## 起因
目前接手的项目，是一个稍微复杂一点的信息管理系统，大概会涉及到十几个模块。因为技术规划的统一要求，凡是新建系统，前端必须使用react，于是开始学习react。 
从网上提供的一些资料、教程可知，react主要解决的是前端页面需要频繁修改Dom的问题。频繁修改Dom会有两个问题。其一，是性能问题；其二，是代码组织与管理的问题。

性能问题，是说每当有界面上的动作，都要修改Dom，可能会导致反复修改一个Dom节点，造成不必要的性能浪费，react使用了虚拟Dom，相当于引入了一层缓冲，只把最后的结果更新到真正的Dom上去。

代码组织与管理问题，是说当个前端逻辑复杂时，传统的纯前端MVC、MVVM等数据管理手段，已经不足以hold住了，需要引入类似Flux这样的单向数据流思想来工程化地组织数据流与代码。

## 经过

看完网上的介绍后，我开始买了一本书介绍react和redux的书籍开始学习，并参考书上的例子来进行练习。

>这里有必要介绍一下我的背景，我是一名Java Web开发工程师，有10年的工作经验。对于前端的经验，仅限于一些浏览器端JavaScript库/UI组件的使用，如Jquery、【YUI】、mootools、dojo、JEasyUI等,从dojo处学习了一些JavaScript模块化开发的知识；
>另外，之前稍微接触过一点nodejs方面的内容，并简单试用过nw.js搭配oracle-node模块连接数据库等。但是因为受到java和maven等早期知识背景的影响,所以当遇到回调地狱和npm这种模块管理器及grunt、gulp等一些依赖、构建管理工具时，我就没有再深入研究以node为基础的生态环境。

那本书首先介绍了react的理念和组件化的开发思想，之后详细介绍了怎么开始开发一个计数器组件、计算器面板，最后介绍了模块化地开发一个todolist程序。我照着书本，敲完了几个章节的样例代码。因为没有ES6的基础，开始在理解上稍微有些困难，但是书上还是很贴心地随时随地介绍了ES6的语法，所以总体下来，基本没有遇到什么大的障碍。

但问题是，照着书里的样例程序，我可以把程序抄下来，调通。我却想不通，为什么要这样写代码，每一块JavaScript的代码扮演着什么角色？如果让我现在开始做一个项目，首页怎么做，框架怎么做，代码如何组织，我一点儿也不知道。原本用Jquery还可以堆砌出来一个可用的系统，而如今我束手无策。react我好想明白了一点，但是其工具栈和生态圈的思路完全让我走丢了。

## 反思

痛苦了好久，终于在一天早上，我发现了一个之前没有注意到的细节：我们使用新工具，是为了解决之前解决不了的问题。但是react声称其解决的问题，我在之前的工作经历中根本就没有遇到过。这感觉就好像，我是一个大别山区里的农民，我用犁杖翻地辛苦了好多年，村里的精准扶贫小组给我送来的不是拖拉机，而是一个快艇。扶贫小组的领导说，快艇可以让我出海捕鱼的时候，走得更远，提高我的捕鱼效率和成果。我坐在快艇里，一脸懵逼，目送村长和领导远去，任周围麦浪起伏。

react解决的第一个问题，是频繁修改Dom时产生的性能问题。但是我之前开发没怎么遇到性能问题，也没有频繁修改Dom啊？我用EasyUI开发系统的时候,要显示一个表格，直接`<table class="easyui-datagrid"><th>...</th><td>...</td></table>`就成了。对表格上数据的组织和变动，EasyUI这个库在内部都实现了，根据以往开发大型信息系统的经验，也没有出现什么性能上的问题。

但是我相信，频繁修改业务Dom这件事，EasyUI的作者肯定遇到过，其它UI库的作者们一定遇到过，他们也用他们自己的办法解决了。我作为一个UI库的使用者，其实是不关心底层的细节的，所以，react的第一个特性对我来说，并没有解决我的什么问题。

react解决的第二个问题，是关于工程化地数据管理与代码组织的问题，这个问题不是react自身解决的，而是其周边的生态系统Flux/Redux/Router等一起解决的。很不巧，这个问题我也没有遇到过。我觉得再复杂的业务系统，也没啥状态好管理的，这么多年我遇到最多的难于管理的复杂状态，就是“表单”了。比如，级联选择表单、A字段填了，B字段就得隐藏或者只读等。它涉及到了复杂的界面控制逻辑，但是也没为难到哪里去，好好组织代码就可以了。

但是我也相信，react不会无中生有，为了推广自己声称自己解决了一些根本不存在的问题。我和react之间，一定有什么误会。这个误会是什么呢？就是SPA。只有在单页面应用中，才会有大量的状态需要管理。
 
## 使用react时遇到的一些问题：
EasyUI想翻页，在`table`标签上加个`pagination=true`属性就行了，想从服务器获取数据，加个`url=/xxx.do`属性就可以了。
